struct Solution;

impl Solution {
    // n choose k
    pub fn combine(n: i32, k: i32) -> Vec<Vec<i32>> {
        let mut ans = Vec::new();
        let goal_len =
            (Self::factorial(n) / (Self::factorial(n - k) * Self::factorial(k))) as usize;

        for b in 0.. {
            let b_str = format!("{b:b}");

            if b_str.chars().filter(|c| *c == '1').count() != k as usize {
                continue;
            }

            let mut combo = Vec::new();

            for (idx, _) in format!("{b:>0goal_len$b}")
                .chars()
                .rev()
                .enumerate()
                .filter(|(_, c)| *c == '1')
            {
                combo.push((idx as i32) + 1);
            }

            ans.push(combo);

            if ans.len() >= goal_len {
                break;
            }
        }

        ans
    }

    fn factorial(n: i32) -> i32 {
        (1..=n).product()
    }
}

#[cfg(test)]
mod tests {
    use super::*;

    #[test]
    fn case_0() {
        let n = 4;
        let k = 2;
        let expected = [
            vec![1, 2],
            vec![1, 3],
            vec![1, 4],
            vec![2, 3],
            vec![2, 4],
            vec![3, 4],
        ];

        let ans = Solution::combine(n, k);
        assert_eq!(ans.len(), expected.len());
        assert!(ans.iter().all(|v| expected.contains(v)));
    }

    #[test]
    fn case_1() {
        let n = 13;
        let k = 3;
        let expected = vec![
            vec![1, 2, 3],
            vec![1, 2, 4],
            vec![1, 2, 5],
            vec![1, 2, 6],
            vec![1, 2, 7],
            vec![1, 2, 8],
            vec![1, 2, 9],
            vec![1, 2, 10],
            vec![1, 2, 11],
            vec![1, 2, 12],
            vec![1, 2, 13],
            vec![1, 3, 4],
            vec![1, 3, 5],
            vec![1, 3, 6],
            vec![1, 3, 7],
            vec![1, 3, 8],
            vec![1, 3, 9],
            vec![1, 3, 10],
            vec![1, 3, 11],
            vec![1, 3, 12],
            vec![1, 3, 13],
            vec![1, 4, 5],
            vec![1, 4, 6],
            vec![1, 4, 7],
            vec![1, 4, 8],
            vec![1, 4, 9],
            vec![1, 4, 10],
            vec![1, 4, 11],
            vec![1, 4, 12],
            vec![1, 4, 13],
            vec![1, 5, 6],
            vec![1, 5, 7],
            vec![1, 5, 8],
            vec![1, 5, 9],
            vec![1, 5, 10],
            vec![1, 5, 11],
            vec![1, 5, 12],
            vec![1, 5, 13],
            vec![1, 6, 7],
            vec![1, 6, 8],
            vec![1, 6, 9],
            vec![1, 6, 10],
            vec![1, 6, 11],
            vec![1, 6, 12],
            vec![1, 6, 13],
            vec![1, 7, 8],
            vec![1, 7, 9],
            vec![1, 7, 10],
            vec![1, 7, 11],
            vec![1, 7, 12],
            vec![1, 7, 13],
            vec![1, 8, 9],
            vec![1, 8, 10],
            vec![1, 8, 11],
            vec![1, 8, 12],
            vec![1, 8, 13],
            vec![1, 9, 10],
            vec![1, 9, 11],
            vec![1, 9, 12],
            vec![1, 9, 13],
            vec![1, 10, 11],
            vec![1, 10, 12],
            vec![1, 10, 13],
            vec![1, 11, 12],
            vec![1, 11, 13],
            vec![1, 12, 13],
            vec![2, 3, 4],
            vec![2, 3, 5],
            vec![2, 3, 6],
            vec![2, 3, 7],
            vec![2, 3, 8],
            vec![2, 3, 9],
            vec![2, 3, 10],
            vec![2, 3, 11],
            vec![2, 3, 12],
            vec![2, 3, 13],
            vec![2, 4, 5],
            vec![2, 4, 6],
            vec![2, 4, 7],
            vec![2, 4, 8],
            vec![2, 4, 9],
            vec![2, 4, 10],
            vec![2, 4, 11],
            vec![2, 4, 12],
            vec![2, 4, 13],
            vec![2, 5, 6],
            vec![2, 5, 7],
            vec![2, 5, 8],
            vec![2, 5, 9],
            vec![2, 5, 10],
            vec![2, 5, 11],
            vec![2, 5, 12],
            vec![2, 5, 13],
            vec![2, 6, 7],
            vec![2, 6, 8],
            vec![2, 6, 9],
            vec![2, 6, 10],
            vec![2, 6, 11],
            vec![2, 6, 12],
            vec![2, 6, 13],
            vec![2, 7, 8],
            vec![2, 7, 9],
            vec![2, 7, 10],
            vec![2, 7, 11],
            vec![2, 7, 12],
            vec![2, 7, 13],
            vec![2, 8, 9],
            vec![2, 8, 10],
            vec![2, 8, 11],
            vec![2, 8, 12],
            vec![2, 8, 13],
            vec![2, 9, 10],
            vec![2, 9, 11],
            vec![2, 9, 12],
            vec![2, 9, 13],
            vec![2, 10, 11],
            vec![2, 10, 12],
            vec![2, 10, 13],
            vec![2, 11, 12],
            vec![2, 11, 13],
            vec![2, 12, 13],
            vec![3, 4, 5],
            vec![3, 4, 6],
            vec![3, 4, 7],
            vec![3, 4, 8],
            vec![3, 4, 9],
            vec![3, 4, 10],
            vec![3, 4, 11],
            vec![3, 4, 12],
            vec![3, 4, 13],
            vec![3, 5, 6],
            vec![3, 5, 7],
            vec![3, 5, 8],
            vec![3, 5, 9],
            vec![3, 5, 10],
            vec![3, 5, 11],
            vec![3, 5, 12],
            vec![3, 5, 13],
            vec![3, 6, 7],
            vec![3, 6, 8],
            vec![3, 6, 9],
            vec![3, 6, 10],
            vec![3, 6, 11],
            vec![3, 6, 12],
            vec![3, 6, 13],
            vec![3, 7, 8],
            vec![3, 7, 9],
            vec![3, 7, 10],
            vec![3, 7, 11],
            vec![3, 7, 12],
            vec![3, 7, 13],
            vec![3, 8, 9],
            vec![3, 8, 10],
            vec![3, 8, 11],
            vec![3, 8, 12],
            vec![3, 8, 13],
            vec![3, 9, 10],
            vec![3, 9, 11],
            vec![3, 9, 12],
            vec![3, 9, 13],
            vec![3, 10, 11],
            vec![3, 10, 12],
            vec![3, 10, 13],
            vec![3, 11, 12],
            vec![3, 11, 13],
            vec![3, 12, 13],
            vec![4, 5, 6],
            vec![4, 5, 7],
            vec![4, 5, 8],
            vec![4, 5, 9],
            vec![4, 5, 10],
            vec![4, 5, 11],
            vec![4, 5, 12],
            vec![4, 5, 13],
            vec![4, 6, 7],
            vec![4, 6, 8],
            vec![4, 6, 9],
            vec![4, 6, 10],
            vec![4, 6, 11],
            vec![4, 6, 12],
            vec![4, 6, 13],
            vec![4, 7, 8],
            vec![4, 7, 9],
            vec![4, 7, 10],
            vec![4, 7, 11],
            vec![4, 7, 12],
            vec![4, 7, 13],
            vec![4, 8, 9],
            vec![4, 8, 10],
            vec![4, 8, 11],
            vec![4, 8, 12],
            vec![4, 8, 13],
            vec![4, 9, 10],
            vec![4, 9, 11],
            vec![4, 9, 12],
            vec![4, 9, 13],
            vec![4, 10, 11],
            vec![4, 10, 12],
            vec![4, 10, 13],
            vec![4, 11, 12],
            vec![4, 11, 13],
            vec![4, 12, 13],
            vec![5, 6, 7],
            vec![5, 6, 8],
            vec![5, 6, 9],
            vec![5, 6, 10],
            vec![5, 6, 11],
            vec![5, 6, 12],
            vec![5, 6, 13],
            vec![5, 7, 8],
            vec![5, 7, 9],
            vec![5, 7, 10],
            vec![5, 7, 11],
            vec![5, 7, 12],
            vec![5, 7, 13],
            vec![5, 8, 9],
            vec![5, 8, 10],
            vec![5, 8, 11],
            vec![5, 8, 12],
            vec![5, 8, 13],
            vec![5, 9, 10],
            vec![5, 9, 11],
            vec![5, 9, 12],
            vec![5, 9, 13],
            vec![5, 10, 11],
            vec![5, 10, 12],
            vec![5, 10, 13],
            vec![5, 11, 12],
            vec![5, 11, 13],
            vec![5, 12, 13],
            vec![6, 7, 8],
            vec![6, 7, 9],
            vec![6, 7, 10],
            vec![6, 7, 11],
            vec![6, 7, 12],
            vec![6, 7, 13],
            vec![6, 8, 9],
            vec![6, 8, 10],
            vec![6, 8, 11],
            vec![6, 8, 12],
            vec![6, 8, 13],
            vec![6, 9, 10],
            vec![6, 9, 11],
            vec![6, 9, 12],
            vec![6, 9, 13],
            vec![6, 10, 11],
            vec![6, 10, 12],
            vec![6, 10, 13],
            vec![6, 11, 12],
            vec![6, 11, 13],
            vec![6, 12, 13],
            vec![7, 8, 9],
            vec![7, 8, 10],
            vec![7, 8, 11],
            vec![7, 8, 12],
            vec![7, 8, 13],
            vec![7, 9, 10],
            vec![7, 9, 11],
            vec![7, 9, 12],
            vec![7, 9, 13],
            vec![7, 10, 11],
            vec![7, 10, 12],
            vec![7, 10, 13],
            vec![7, 11, 12],
            vec![7, 11, 13],
            vec![7, 12, 13],
            vec![8, 9, 10],
            vec![8, 9, 11],
            vec![8, 9, 12],
            vec![8, 9, 13],
            vec![8, 10, 11],
            vec![8, 10, 12],
            vec![8, 10, 13],
            vec![8, 11, 12],
            vec![8, 11, 13],
            vec![8, 12, 13],
            vec![9, 10, 11],
            vec![9, 10, 12],
            vec![9, 10, 13],
            vec![9, 11, 12],
            vec![9, 11, 13],
            vec![9, 12, 13],
            vec![10, 11, 12],
            vec![10, 11, 13],
            vec![10, 12, 13],
            vec![11, 12, 13],
        ];

        let ans = Solution::combine(n, k);
        assert_eq!(ans.len(), expected.len());
        assert!(ans.iter().all(|v| expected.contains(v)));
    }
}
